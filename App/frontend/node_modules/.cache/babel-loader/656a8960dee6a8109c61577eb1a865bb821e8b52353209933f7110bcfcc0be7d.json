{"ast":null,"code":"import { Node, mergeAttributes } from '@tiptap/core';\nconst HardBreak = Node.create({\n  name: 'hardBreak',\n  addOptions() {\n    return {\n      keepMarks: true,\n      HTMLAttributes: {}\n    };\n  },\n  inline: true,\n  group: 'inline',\n  selectable: false,\n  parseHTML() {\n    return [{\n      tag: 'br'\n    }];\n  },\n  renderHTML(_ref) {\n    let {\n      HTMLAttributes\n    } = _ref;\n    return ['br', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes)];\n  },\n  renderText() {\n    return '\\n';\n  },\n  addCommands() {\n    return {\n      setHardBreak: () => _ref2 => {\n        let {\n          commands,\n          chain,\n          state,\n          editor\n        } = _ref2;\n        return commands.first([() => commands.exitCode(), () => commands.command(() => {\n          const {\n            selection,\n            storedMarks\n          } = state;\n          if (selection.$from.parent.type.spec.isolating) {\n            return false;\n          }\n          const {\n            keepMarks\n          } = this.options;\n          const {\n            splittableMarks\n          } = editor.extensionManager;\n          const marks = storedMarks || selection.$to.parentOffset && selection.$from.marks();\n          return chain().insertContent({\n            type: this.name\n          }).command(_ref3 => {\n            let {\n              tr,\n              dispatch\n            } = _ref3;\n            if (dispatch && marks && keepMarks) {\n              const filteredMarks = marks.filter(mark => splittableMarks.includes(mark.type.name));\n              tr.ensureMarks(filteredMarks);\n            }\n            return true;\n          }).run();\n        })]);\n      }\n    };\n  },\n  addKeyboardShortcuts() {\n    return {\n      'Mod-Enter': () => this.editor.commands.setHardBreak(),\n      'Shift-Enter': () => this.editor.commands.setHardBreak()\n    };\n  }\n});\nexport { HardBreak, HardBreak as default };","map":{"version":3,"names":["HardBreak","Node","create","name","addOptions","keepMarks","HTMLAttributes","inline","group","selectable","parseHTML","tag","renderHTML","_ref","mergeAttributes","options","renderText","addCommands","setHardBreak","_ref2","commands","chain","state","editor","first","exitCode","command","selection","storedMarks","$from","parent","type","spec","isolating","splittableMarks","extensionManager","marks","$to","parentOffset","insertContent","_ref3","tr","dispatch","filteredMarks","filter","mark","includes","ensureMarks","run","addKeyboardShortcuts","Mod-Enter","Shift-Enter"],"sources":["/Users/xander/go/hexon/frontend/node_modules/@tiptap/extension-hard-break/src/hard-break.ts"],"sourcesContent":["import { mergeAttributes, Node } from '@tiptap/core'\n\nexport interface HardBreakOptions {\n  keepMarks: boolean,\n  HTMLAttributes: Record<string, any>,\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    hardBreak: {\n      /**\n       * Add a hard break\n       */\n      setHardBreak: () => ReturnType,\n    }\n  }\n}\n\nexport const HardBreak = Node.create<HardBreakOptions>({\n  name: 'hardBreak',\n\n  addOptions() {\n    return {\n      keepMarks: true,\n      HTMLAttributes: {},\n    }\n  },\n\n  inline: true,\n\n  group: 'inline',\n\n  selectable: false,\n\n  parseHTML() {\n    return [\n      { tag: 'br' },\n    ]\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['br', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes)]\n  },\n\n  renderText() {\n    return '\\n'\n  },\n\n  addCommands() {\n    return {\n      setHardBreak: () => ({\n        commands,\n        chain,\n        state,\n        editor,\n      }) => {\n        return commands.first([\n          () => commands.exitCode(),\n          () => commands.command(() => {\n            const { selection, storedMarks } = state\n\n            if (selection.$from.parent.type.spec.isolating) {\n              return false\n            }\n\n            const { keepMarks } = this.options\n            const { splittableMarks } = editor.extensionManager\n            const marks = storedMarks\n              || (selection.$to.parentOffset && selection.$from.marks())\n\n            return chain()\n              .insertContent({ type: this.name })\n              .command(({ tr, dispatch }) => {\n                if (dispatch && marks && keepMarks) {\n                  const filteredMarks = marks\n                    .filter(mark => splittableMarks.includes(mark.type.name))\n\n                  tr.ensureMarks(filteredMarks)\n                }\n\n                return true\n              })\n              .run()\n          }),\n        ])\n      },\n    }\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-Enter': () => this.editor.commands.setHardBreak(),\n      'Shift-Enter': () => this.editor.commands.setHardBreak(),\n    }\n  },\n})\n"],"mappings":";AAkBa,MAAAA,SAAS,GAAGC,IAAI,CAACC,MAAM,CAAmB;EACrDC,IAAI,EAAE,WAAW;EAEjBC,UAAUA,CAAA;IACR,OAAO;MACLC,SAAS,EAAE,IAAI;MACfC,cAAc,EAAE;KACjB;GACF;EAEDC,MAAM,EAAE,IAAI;EAEZC,KAAK,EAAE,QAAQ;EAEfC,UAAU,EAAE,KAAK;EAEjBC,SAASA,CAAA;IACP,OAAO,CACL;MAAEC,GAAG,EAAE;IAAI,CAAE,CACd;GACF;EAEDC,UAAUA,CAAAC,IAAA,EAAmB;IAAA,IAAlB;MAAEP;IAAc,CAAE,GAAAO,IAAA;IAC3B,OAAO,CAAC,IAAI,EAAEC,eAAe,CAAC,IAAI,CAACC,OAAO,CAACT,cAAc,EAAEA,cAAc,CAAC,CAAC;GAC5E;EAEDU,UAAUA,CAAA;IACR,OAAO,IAAI;GACZ;EAEDC,WAAWA,CAAA;IACT,OAAO;MACLC,YAAY,EAAEA,CAAA,KAAMC,KAAA,IAKf;QAAA,IALgB;UACnBC,QAAQ;UACRC,KAAK;UACLC,KAAK;UACLC;QAAM,CACP,GAAAJ,KAAA;QACC,OAAOC,QAAQ,CAACI,KAAK,CAAC,CACpB,MAAMJ,QAAQ,CAACK,QAAQ,EAAE,EACzB,MAAML,QAAQ,CAACM,OAAO,CAAC,MAAK;UAC1B,MAAM;YAAEC,SAAS;YAAEC;UAAW,CAAE,GAAGN,KAAK;UAExC,IAAIK,SAAS,CAACE,KAAK,CAACC,MAAM,CAACC,IAAI,CAACC,IAAI,CAACC,SAAS,EAAE;YAC9C,OAAO,KAAK;UACb;UAED,MAAM;YAAE5B;UAAS,CAAE,GAAG,IAAI,CAACU,OAAO;UAClC,MAAM;YAAEmB;UAAe,CAAE,GAAGX,MAAM,CAACY,gBAAgB;UACnD,MAAMC,KAAK,GAAGR,WAAW,IACnBD,SAAS,CAACU,GAAG,CAACC,YAAY,IAAIX,SAAS,CAACE,KAAK,CAACO,KAAK,EAAG;UAE5D,OAAOf,KAAK,EAAE,CACXkB,aAAa,CAAC;YAAER,IAAI,EAAE,IAAI,CAAC5B;UAAI,CAAE,CAAC,CAClCuB,OAAO,CAACc,KAAA,IAAqB;YAAA,IAApB;cAAEC,EAAE;cAAEC;YAAQ,CAAE,GAAAF,KAAA;YACxB,IAAIE,QAAQ,IAAIN,KAAK,IAAI/B,SAAS,EAAE;cAClC,MAAMsC,aAAa,GAAGP,KAAK,CACxBQ,MAAM,CAACC,IAAI,IAAIX,eAAe,CAACY,QAAQ,CAACD,IAAI,CAACd,IAAI,CAAC5B,IAAI,CAAC,CAAC;cAE3DsC,EAAE,CAACM,WAAW,CAACJ,aAAa,CAAC;YAC9B;YAED,OAAO,IAAI;UACb,CAAC,CAAC,CACDK,GAAG,EAAE;QACV,CAAC,CAAC,CACH,CAAC;;KAEL;GACF;EAEDC,oBAAoBA,CAAA;IAClB,OAAO;MACL,WAAW,EAAEC,CAAA,KAAM,IAAI,CAAC3B,MAAM,CAACH,QAAQ,CAACF,YAAY,EAAE;MACtD,aAAa,EAAEiC,CAAA,KAAM,IAAI,CAAC5B,MAAM,CAACH,QAAQ,CAACF,YAAY;KACvD;;AAEJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}